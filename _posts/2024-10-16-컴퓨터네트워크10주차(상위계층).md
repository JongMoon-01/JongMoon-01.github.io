---
title: "컴퓨터 네트워크 10주차(상위계층)"
date: 2024-11-20 02:23:00 +0900
categories: [Network]
tags: [V2X, Network, Python]
---

<center>
<img src="https://github.com/user-attachments/assets/006f39a1-462f-4ac5-b69f-88b689b70d36" width="720" height=""/>
<p><b>[그림9]. TCP/IP 계층  </b></p>
</center>

# 1. 상위 계층 소개

<img width="200" alt="image" src="https://github.com/user-attachments/assets/fdfcf41a-f2b8-4053-8b53-1546e86411ac">

# 2. 세션 계층(5계층/6,7계층의 서비스 연결 및 해제 담당)
- 기능
    1) 세션 연결의 설정과 해제, 세션 메시지 전송 등
    2) <code>동기 기능</code>(가장 중요)
        - 통신 양단에서 서로 동의하는 논리적 동기점을 지정하기 위해 사용(오류가 나면 어디까지가 오류가 없었고 오류가 어디서 생겼는지 찾기 위함.)
        - 오류 복구를 위하여 필수적으로 요구됨
        - 동기점 설정 이전까지는 서로 처리가 완료되었음을 합의했다는 의미
    3) 대화 단계
        - 메시지 전송 과정 의미
        - 시간 경과에 따라 순차적으로 동기점을 부여해 신뢰성 보장 기능을 단계적으로 구현 가능

* 세션 연결 예시 : 데이터 다운로드 중 음영지역에 들어가 다운로드가 끊기고 다시 나와도 받았던 곳부터 다시 다운로드 받을 수 있는 이유는 세션이 계속 연결되어 있기 때문.

## 2.1. 토큰(Dialogue 관리용)

- 토큰
    - 두 응용 프로세스의 대화 관리
    - 토큰 보유는 토큰에 부여된 특정 권리를 배타적(다른 사람이 해당 토큰 권리를 침범하지 못함)으로 소유한다는 의미
- 토큰 종류
    - 데이터 토큰 : 데이터 전송 권리 제공
    - 해제 토큰 : 통신 양단 간의 연결 해제 과정을 제어하기 위함
    - 동기 토큰 : 세션 연결을 사용하는 과정에서 동기 처리가 필요한 지점에 사용
        - 주동기(major) 토큰 : 대화의 주된 부분, 특정 대화 단위를 구분
        - 부동기(minor) 토큰 : 대화의 작은 부분, 대화 단위를 세분화 시켜서 구분
- 동기점
    - 동기점의 부여 : 큰 파일을 작은 파일로 구분하는 과정
        1) 큰 파일 전송 과정 중간에 동기점 부여
        2) 동기점 부여되었다는 의미는 해당 내용까지는 전송이 완료되었다는 뜻
        3) 전송 과정에 오류가 발생하면 동기점 이후의 과정

## 2.2. 동기

- 동기
    - 세션 연결을 사용해 데이터를 주고 받다가 오류 발생시, 이를 효과적으로 복구할수 있게 해줌
    1) 재동기 기능
        - 재동기 : 동기점을 이용한 일련의 복구 과정
        - 주동기점
            - 주동기점이 설정된 곳은 완벽히 처리되었다는 의미
            - 주동기점 이전의 복구 과정은 필요 x
        - 부동기점
            - 복구에 필요한 백업정보가 상대적으로 적음
            - 오류 복구가 완벽히 이루어지지 않을 수 있음
            - 이전 부동기점에서 복구가 불가능하면 직전 부동기점으로 이동 과정 반복
    2) 액티비티 기능
        - 세션 프로세스 사이에 논리적으로 설정되는 단위, 상호 독립적
        - 액티비티 단위의 시작과 끝의 표시는 주동기점의 설정과 동일한 효과를 가짐

<img width="431" alt="image" src="https://github.com/user-attachments/assets/3842f87d-310b-4b21-82a9-afa3335bb9e9">

* 6지점에서 오류가 발생하면 5지점에서 백업, 여기서도 불가능하면 4지점에서 완벽한 백업 수행함.

## 2.3. 세션 연결
1. 다중 세션 연결을 지원하는 서버
    - 하나의 서버 프로세스가 다수의 클라이언트를 동시에 지원
    - 서비스 시간이 짧은 경우에 유리
    - 서비스 시간이 길면 클라이언트의 대기 시간이 무한정 증가할 수 있다.( 한 클라이언트가 서버 자원을 독점할 수 도 있기 때문.)

<img width="212" alt="image" src="https://github.com/user-attachments/assets/eaa742c0-df88-4cd6-a22b-e42d6bee972b">

2. 단일 세션 연결을 지원하는 서버
    - 하나의 서버 프로세스가 하나의 클라이언트만 지원
    - 대표 서버
        - 클라이언트의 연결 요청 처리
        - 하위 서버 프로세스 생성
        - Well-known 포트
    - 단점
        - 개별 요구마다 하위프로세스를 생성하기 때문에 초기 서비스 환경 구축에 따른 오버헤드 증가

<img width="381" alt="image" src="https://github.com/user-attachments/assets/c4624321-4260-4b1f-bad1-ee48ce4563b4">

# 3. 데이터 표현
## 3.1. 데이터 표현
- 추상 문법
    - 추상 문법 : 컴퓨터에서 사용하는 데이터 표현 규칙(전송 문법을 추상문법으로 전환해서 해석하는 것.)
    - 전송 문법 : 네트워크 전체에서 일관성을 지니는 표현 규칙(독립적이고 네트워크 전체에서 사용 가능.)

<img width="611" alt="image" src="https://github.com/user-attachments/assets/15cea12c-e671-4c5e-8e44-c758c29821c0">

### 3.1.1. ASN.1
- 분산 환경에 표현되느 데이터를 정의하기 위한 일반적인 추상 문법
- PDU(Protocol Data Unit)의 구조정의

<img width="536" alt="image" src="https://github.com/user-attachments/assets/29ac5b3e-fbdb-4085-a4c6-a354739bf408">

- ASN.1 규약에서 지원하는 클래스 유형

<img width="511" alt="image" src="https://github.com/user-attachments/assets/67cbb923-bc33-4cba-88a0-814bcfe9c7c2">


- ASN.1의 UNIVERSAL 클래스
    - 일반 데이터형 정의
    - 기본형(Primitive) <img width="560" alt="image" src="https://github.com/user-attachments/assets/deaf2cab-b797-40e3-bec8-c05b6d58eb2e">
    - 구조형(Constructed) <img width="680" alt="image" src="https://github.com/user-attachments/assets/0eda977a-4d35-4e8e-a625-ffc7f37d0479">

## 3.2. 데이터 압축
- 대용량 데이터는 압축하여 크기를 줄인 후 전송하는 것이 속도에서 유리
- 데이터의 특성에 맞는 알고리즘을 사용하는 것이 중요

- 연속 문자 압축의 예
    - 알고리즘 <img width="585" alt="image" src="https://github.com/user-attachments/assets/6254d7a6-9a0a-4e78-bdea-aecc2197f511">
    - 데이터 압축 예
        1) T 문자를 모자이크 형태로 형상화한 정지 영상 데이터
        2) 원본 데이터 18x10(Byte) = 180bytes
        3) 압축 데이터 크기는 3x19 = 57bytes
        4) 압축 해제 : 18x10의 밑그림 위에 Pattern의 내용을 Count만큼씩 표시
    - <img width="410" alt="image" src="https://github.com/user-attachments/assets/dbf289f4-32bc-48f4-9eb2-c3f1dc546bc1">

* 왼쪽에서 오른쪽으로 연속된 문자만큼 Count, 만약 다른 타입의 문자 만날경우 해당 문자의 연속성 체크 이걸 반복.

### 3.2.1. 손실/비손실 데이터 압축
1. 비손실 압축
    - 압축 과정에서 원래 데이터의 내용을 분실하지 않음
    - 압축 해제 과정을 통해 원래의 데이터를 100% 복원
2. 손실 압축
    - 압축 과정에서 원래 데이터의 내용을 부분적으로 분실
    - 압축 해제 과정을 통해 원래의 데이터를 100% 복원할 수 없음
    - 압축 효율을 높이기 위하여 사용

<img width="368" alt="image" src="https://github.com/user-attachments/assets/7aa37650-e60b-4e36-a6c4-0e191fa4f96d">

# 4. 응용 계층(4계층 인터페이스에서 SySCall을 이용해서 서비스 이용)
- 클라이언트-서버 모델
    - 서버가 먼저 통신 대기 상태, 비대칭 구조는 클라이언트와 서버의 연동을 단순화 시키는 장점이 있음

* 필요할때 5,6 계층을 응용계층에 포함시키면됨.

<img width="629" alt="image" src="https://github.com/user-attachments/assets/94c3b6f2-0582-4e81-91eb-1a30412bb034">

* 항상 서버에서는 서비스 대기를 위해 포트를 열어놓음(1. 통신대기 과정), 해당 과정의 이점으로 클라이언트가 요청만 보내면 서비스 받을 수 있음.

- 연결형/비연결형 서비스
    - UDP : 속도 빠르지만, 신뢰성 낮음, 비순서 도착(응용 계층에서 오류 처리해줘야함, 상태 정보 Rx/Tx간에 처리하기 어려울때도 사용)
    - TCP : 신뢰성 높지만, 속도가 낮음  
- 상태 정보
    - 상태 : 특정 상황(한쪽이 비정상적인 작동했을 때, PowerOff 등..)에 대해 통신 양단이 바라보는 관점
    - 오류 발생시 서로 합의할 수 있는 상태로 되돌아 가는 과정이 복구 과정
    - 비상태 서비스
        - 상태가 없으므로 복구 과정이 간단
        - 파일 공유 서비스는 대표적인 비상태 서비스 예시

## 4.1. 동시성 제어
- 동시성
    - 임의의 여러 동작이 외형상 동시에 진행되는 것처럼 보임
    - 여러 동작의 선후 진행속도가 실행 결과에 영향 X
    - 예 : 단일 CPU 컴퓨터에서 여러 프로세스가 실행되는 경우
- 동시성 제어
    - 독립적으로 실행되는 프로세스의 실행순서가 결과에 영향 X

* ex). 서버 하나가 여러 클라이언트에게 서비스를 동시에 지원하는 것.(A클라이언트가 서버에 서비스 받는 동안 B클라이언트도 처리 가능)
* 반복 서비스 방식 : 서버 하나가 여러 클라이언트 서비스 지원하지만, 특정 시점 T에서 하나의 클라이언트에만 서비스 지원 중이고 다른 클라이언트는 대기 상태인것.