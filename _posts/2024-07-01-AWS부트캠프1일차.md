---
title: "AWS 부트캠프 1일차"
date: 2024-07-01 02:23:00 +0900
categories: [AWS]
tags: [Cloud, Back-end, Server]
---
# 1. 소개
 하계 방학에 공유대학에서 진행하는 AWS 교육 부트캠프가 있길래 신청해서 들어 보았다. 총 4박 5일로 구성되며 1, 2일차에는 기본적인 내용을 다루고 3일차부터 5일차까지는 심화된 내용 및 자격증 취득과정을 설명해준다.
첫 강의는 AWS Cloud Practioner Essentials이다.

# 2. 클라우드 서버 개요
 클라우드 서버는 아래 소개한 특성을 통해 온프레미스 방식에 비해 유연하고 효율적인 서버 관리기법을 사용자에게 제공해줍니다.

- On-Demand 서비스

- 대규모 사전 투자 방지

- 필요에 따라 컴퓨팅 리소스 프로비저닝

- 종량제 방식의 비지니스 모델

## 2.1 클라이언트 - 서버 모델
 컴퓨팅에서 고객은 클라이언트이며, 클라이언트는 사람이 컴퓨터 서버에 요청을 보내는 웹브라우저 또는 app일 수 있습니다. 서버는 EC2와 같은 서비스일 수 있습니다.


<center>
<img src="https://github.com/cisco/openh264/assets/56510688/f8b1de26-a7d2-4bab-80e8-9c0de2693756" width="720" height=""/>
<p><b>[그림1]. 클라이언트 - 서버 모델 </b></p>
</center>

## 2.2 클라우드 기반과 온프레미스 방식 비교

- 클라우드 특징
  - 앱의 모든 부분을 클라우드에서 실행
  - 기존 앱을 클라우드로 마이그레이션
  - 클라우드에서 앱 확장 및 새로운 앱 구축

- 온프레미스 특징
  - 가상화 및 리소스 도구를 사용해 리소스 배포
  - 앱 관리 및 가상화 기술을 사용해 리소스 사용량 증가

## 2.3 클라우드 컴퓨팅 이점
- 가변 비용 : 대규모 데이터 센터 마련할 필요 없이 탄력적 운용
- 비용 최적화 : 데이터 센터 관리 인력 축소
- 용량 : 서비스 릴리즈 이전에 사용량 예측할 필요성 X
- 속도 및 민첩성 : 더욱 쉽게 개발 및 배포 환경 제공 또한 서버 추가 리소스 확보할 때 매우 짧은 시간안에 가능
 

# 3. 클라우드 컴퓨팅

## 3.1 EC2 이점

- 안전하고 크기 조정이 가능한 컴퓨팅 용량 사용

- 짧은 시간안에 서버 인스턴스 부팅

- 종량제 요금 사용

회사에서 온프레미스 리소스를 사용할 경우 새로운 웹 사이트를 개설할떄 거치는 시나리오는 다음과 같습니다.

1. 하드웨어를 구입하기 위해 비용 지출
2. 서버가 배송될 떄까지 대기
3. 물리적 데이터 센터에 서버 설치
4. 필요한 모든 구성 설치

하지만 EC2를 이용한 가상 서버 사용시 해당 시나리오는 다음과 같습니다.

1. EC2 인스턴스 프로비저닝 및 시작
2. 워크로드 실행 마치면 사용 중지
3. 인스턴스 실행 중일 때 사용한 컴퓨팅 시간에 대해서만 비용 지출
4. 인스턴스 중지 또는 종료 시 비용 지불 X
5. 필요한 서버 용량에 대해서만 비용 지불하여 비용 절감

### 3.1.1. EC2 작동 방식
1. 인스턴스를 시작합니다. 인스턴스의 기본 구성이 포함된 템플릿을 선택합니다.(T1, T2 등등) - OS, APP Server Or APP 포함

2. 인스턴스 준비 시, 해당 인스턴스로 들어오고 나가는 네트워크 트래픽을 제어할 보안설정 지정.

3. 인스턴스에 연결. 직접 연결할 수도 있고 여러 App이나 프로그램에서 연결 할 수 도 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/9b80abee-5350-40b2-a24d-8db7871401c5" width="720" height=""/>
<p><b>[그림2]. EC2 작동 방식 </b></p>
</center>

## 3.2 EC2 인스턴스 유형

|범용|컴퓨팅 최적화|메모리 최적화|
|:-----|:---------|:-----------|
|컴퓨팅, 메모리, 네트워킹 리소스를 균형 있게 제공|고성능 프로세서 제공|메모리 집약적 워크로드를 위한 빠른 성능 제공|
|다양한 워크로드에 적합|컴퓨팅 집약적 애플리케이션 및 배치 처리 워크로드에 적합|고성능 데이터베이스에 적합|
||여러 트랜잭션을 단일 그룹으로 처리해야하는 배치 처리 워크로드에도 적합|대규모 데이터 세트 처리에 적합|

|가속 컴퓨팅|스토리지 최적화|
|:--------|:--------------|
|하드웨어 액설러레이터를 사용하여 데이터 처리 가속화|낮은 지연시간 및 높은 초당 입출력 작업 수(IOPS) 제공|
|애플리케이션 스트리밍 및 그래픽 워크로드에 적합|분산 파일 시스템 및 데이터 웨어하우징 애플리케이션, 빈도가 높은 온라인 트랜잭션과 같은 워크로드에 적합|
|GPU 연산 처리 특화|로컬 스토리지의 대규모 데이터 세트에 대한 순차적 읽기 또는 쓰기 엑세스가 많이 필요한 워크로드에 적합|

## 3.3 EC2 요금

|On-Demand|Spot|Reserved|
|:--------|:------|:------|
|초기 선결제 비용이나 최소 약정 X|시작 및 종료 시간이 자유로운 워크로드, 중단을 견딜 수 있는 유형의 워크로드에 적합|On-Demand 요금에 비해 결제 할인 제공|
|중단되면 안되는 불규칙한 단기 워크로드에 적합|On-Demand 대비 비용 절감|1년 또는 3년 약정 필요|

* On-Demand 경우 1년 이상 지속되는 워크로드에서는 예약 인스턴스가 비용 측면에서 더 효과적(사용 패턴을 예측할 수 없는 애플리케이션 또는 개발 및 테스트 환경에 적합하기 때문)

* Spot Instance는 미사용 EC2 컴퓨팅 용량 사용하며 On-Demand보다 최대 90%까지 비용 절감 가능

* Spot Instance는 EC2에 요청을 보냈을 때 사용할 용량이 없으면 EC2가 Spot Instance가 보낸 백그라운드 처리 작업이 지연될 수 있음.

|Compute Saving Plans|전용 인스턴스|전용 호스트|
|컴퓨팅 사용량이 일정할 경우 On-Demand에 비해 최대 66% 비용 절감|단일 고객용 하드웨어의 VPC에서 실행되는 EC2 Instance|단일 고객용 EC2 인스턴스 용량을 갖춘 물리적 서버|
|1년 또는 3년 약정 필요|표준 EC2 인스턴스에 비해 더 높은 비용|가장 비용이 많이 드는 EC2 옵션|

* 예약 Instance 보다 더 많은 유연성을 원할 때 Savings Plans를 고려할 수 있음.

* 전용 인스턴스는 중단없이 실행, 컴퓨팅 시간에 대해서만 비용 지불.

* 전용 호스트는 사용자 전용 EC2 Instance 용량을 갖춘 서버. 기존 소켓당 코어당 또는 VM당 소프트웨어 라이선스 사용해 규정 준수 가능.(On-Demand 또는 Reserved Instacne로 구입 가능)

```
VPC(Virtual Private Cloud)는 퍼블릭 클라우드 환경에서 사용할 수 있는 고객 전용 사설 네트워크
```

## 3.4 EC2 Auto Scaling
 변화하는 애플리케이션 수요에 따라 EC2 Instance를 자동으로 추가하거나 제거.

- 동적 크기 조정 : 현재 수요 변화에 대응
- 예측 크기 조정 : 예측된 수요에 따라 적절한 수의 EC2 Instance를 자동으로 예약

- Auto Scaling Group을 사용할 시 최소 용량, 희망 용량, 최대 용량을 설정해주어야함.

* 두 가지 방식을 함께 사용가능.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/fc98c931-5a5c-4a5a-877f-18c709d80233" width="720" height=""/>
<p><b>[그림3]. 웹사이트 트래픽 통계 </b></p>
</center>

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/86f33a97-c0ab-4207-8364-008533e7557c
" width="720" height=""/>
<p><b>[그림4]. Auto Scaling Group 예시 </b></p>
</center>

* 최소 용량은 Auto Scaling Group 생성 직후 1개 이상으로 꼭 설정해 둬야함. (Default는 1개)

## 3.5 Elastuc Load Balancing
워크 로드를 분산하여 단일 리소스가 전체 워크로드를 혼자 처리하는 것을 방지하여 App 성능을 향상시킵니다.

워크로드가 들어오면 Auto Scaling Group에 할당 되기이전에 Load Balancer에 먼저 할당되어 Auto Scaling Group의 Element에 균등하게 분할됩니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/c7e87563-95c1-4728-9621-743ae1f3fddd" width="720" height=""/>
<p><b>[그림5]. Auto Scaling Group 예시 </b></p>
</center>

## 3.6 AWS 메시징 서비스

1. 모놀리스 애플리케이션 : 구성요소가 밀결합된 애플리케이션으로 한 구성 요소에서 장애가 발생하면 다른 구성요소에서도 장애가 발생할 확률이 매우 높음.

2. 마이크로서비스 접근 방식 : 단일 구성 요소에 장애가 발생해도 전체 애플리케이션이 서비스 다운될 가능성이 적음.

AWS에서는 Amazon Simple Notification Service와 Amazon Simple Queue Service로 마이크로서비스 접근 방식을 취할 수 있도록 도와줍니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/261e96af-303d-4ab4-b656-e7a413ef8927" width="720" height=""/>
<p><b>[그림5]. Auto Scaling Group 예시 </b></p>
</center>

|Amazon Simple Notification Service|Amazon Simple Queue Service|
|:-------------|:-----------------|
|메시지가 주제에 게시됨|소프트웨어 구성 요소 간에 메시지를 전송, 저장, 수신|
|구독자는 자신의 주제에 대한 메시지를 즉시 수신|다른 서비스를 사용할 필요 없이 메시지를 대기열에 넣음|

* Amazon SNS에서는 구독자가 웹서버, 이메일 주소, AWS Lambda 함수 또는 기타 여러 옵션이 될 수 있음.

* Amazon SQS를 사용하면 메시지 손실이나 다른 서비스 사용 없이 많은 메시지를 소프트웨어 구성 요소간에 전송, 저장, 수신 가능. 해당 서비스에서는 App이 메시지를 Queue로 전송, 사용자 or Service는 Queue에서 메시지 검색 후 처리 후 deQueue

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/edc8c095-c145-4401-ab05-abc4ad1d9c12" width="720" height=""/>
<p><b>[그림6]. Amazon Simple Notification Service 예시 </b></p>
</center>

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/39dac575-b40a-4272-b937-946263037149" width="720" height=""/>
<p><b>[그림7]. Amazon Simple Queue Service </b></p>
</center>

## 3.7 Serverless Computing Service
Amazon EC2에서 실행하려는 App이 있는 경우 다음과 같은 과정을 거쳐야합니다.

1. 인스턴스(가상 서버)를 프로비저닝 합니다.
2. 사용자 코드를 업로드 합니다.
3. App이 실행되는 동안 계속 Instance를 관리합니다.

```
Serverless라는 용어는 코드가 서버에서 실행되지만 서버를 프로비저닝하거나 관리할 필요가 없다는 뜻입니다.
```

장점으로는 Serverless App을 자동으로 확장하거나 처리량 및 메모리와 같은 소비 단위를 수정하여 용량을 조정할 수 있습니다. 대표적으로 AWS Lambda를 사용해 구현합니다.

- 서버를 프로비저닝하거나 관리 하지 않고 코드 실행
- 코드가 실행되는 컴퓨팅 시간에 대해서만 비용 지불
- 다른 AWS 서비스를 사용해 코드를 자동으로 트리거

ex. 업로드 되는 이미지의 크기를 AWS 클라우드에 맞춰 자동으로 조정해주는 함수 이 경우, 새 이미지가 업로드 될때 Lambda함수의 트리거가 됩니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/73fbc50e-f15a-404f-9210-c532fa1bee33" width="720" height=""/>
<p><b>[그림8]. AWS Lambda 작동 방식 </b></p>
</center>

## 3.8 AWS Container Service

컨테이너는 App의 코드와 종속성을 하나의 객체로 패키징하는 표준 방식 제공합니다. 컨테이너 필수 보안, 안정성, 확장성, 요구 사항이 있는 프로세스와 워크플로에 사용됨.

AWS에서는 크게 두 가지 Container orchestration Service를 이용해 컨테이너 배포, 관리, 확장을 다룹니다.

1. Amazon Elastic Container Service와 Amazon Elastic Kurbernetes Service에 대해 알아보겠습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/d7a19333-3168-49c4-9f9c-14de91323058" width="720" height=""/>
<p><b>[그림9]. 컨테이너 개념 </b></p>
</center>

|Amazon Elastic Container Service|Amazon Ealstcic Kurbernetes Service|AWS Fargate|
|:---------------|:-------------------|:---------------------------|
|컨테이나화된 애플리케이션 실행 및 크기 조정|Kubernetes App 실행 및 크기 조정|AWS ECS나 AWS EKS를 Serverless 방식으로 구동|
|간단한 API 호출을 사용해 Docker 지원 App 제어|새로운 기능으로 App을 손쉽게 업데이트|사용한 리소스에 대해서만 비용 지불|

* AWS Fargate는 Container orchestration service가 아닌 Container hosting Platform이다.
* Serverless 방식으로 하기 떄문에 위와 동일하게 Server를 프로비저닝하거나 관리할 필요 X

# 4.글로벌 인프라 및 안정성
AWS는 전서계에 비지니스 트래픽 수요가 있는 곳과 가까운 위치에 Region을 구축합니다. Region은 App을 실행하는 모든 구성요소가 있는 여러 데이터 센터를 뜻합니다.

각 Region은 광섬유를 통해 다른 Region과 연결됩니다.

아래의 예시와 같이 커피 지점을 Region이라하고 Client를 커피를 사려고하는 손님이라고 했을 때 가장 가까운 최적의 지점의 Region을 사용할 수 없는 상황이라면 네 가지 비지니스 요소를 고려해 새 Region을 탐색합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/5bc7b37f-9305-41c8-ab51-1b782cf5aa4a" width="720" height=""/>
<p><b>[그림10]. 글로벌 인프라 예시 </b></p>
</center>

## 4.2 Region 선택

1. Data Governance 및 법적 요구 사항 준수 : 위치에 따라 특정 영역에서 데이터를 실행해야할 수 있음. 예를 들어 회사의 모든 데이터를 영국 내부에 유지해야한다는 규정이 있을 경우 런던 Region을 선택해야함.

2. 고객과의 접근성 : 고객과 가까운 리전을 선택하면 고객에게 콘텐츠를 더 빠르게 제공하는데 도움이 됨.

3. Region내에서 사용할 수 있는 서비스 : 경우에 따라 가장 가까운 곳에 사용자가 원하는 기능을 수행하는 Region이 없을 수 있으므로 서비스를 제공하는 Region 중 하나에서 실행해야함.

4. 요금 : 동일 워크로드를 수행하는데 나라의 세제 때문에 더 많은 비용이 소모될 수 있으므로 적절한 Region 선택.

## 4.3 가용 영역

가용 영역은 리전 내의 단일 데이터 센터 또는 데이터 센터 그룹으로 이뤄져 있습니다. 리전의 한 부분에서 재해가 발생하는 경우 지리적 거리를 통해 모든 가용 영역이 영향을 받지 않도록할 수 있습니다. 리전 내의 가용 영역끼리는 상호 연결이 되어 동시에 같은 App을 실행할 수 있습니다.

예시 2에서 보는 것처럼 한 가용 영역에서 실행 중인 App이 더 이상 서비스 제공이 불가할 때 같은 리전내의 다른 가용 영역에서 동일한 App을 실행중일 경우 데이터 손실 없이 서비스를 지속할 수 있습니다.

리전은 보통 세개 이상의 가용 영역으로 구성되며 각 가용 영역에는 하나 이상의 데이터 센터가 포함됩니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/fef76176-119f-42dc-bd08-d2e572b17b26" width="720" height=""/>
<p><b>[그림11]. 가용 영역 예시 1</b></p>
</center>

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/2c683c6b-e2ac-4cc6-a489-b9f8edb7a91f" width="720" height=""/>
<p><b>[그림12]. 가용 영역 예시 2</b></p>
</center>

## 4.4 Amazon CloudFront 및 엣지 로케이션의 이점 설명

Edge Location은 Amazon CloudFront가 고객에게 더 빨리 콘텐츠를 전송하기 위해 Cached Content Data를 저장하는 데 사용하는 사이트 입니다.

예를 들어 브라질에 데이터가 저장되어 있고 중국에 거주하는 클라이언트가 해당 데이터를 받기 위해서 모든 데이터를 중국 리전 중 하나로 이동할 필요 없이 중국 내 고객과 가까운 Edge Location에 사본을 Local로 Caching 할 수 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/9484e54f-4eb3-4877-8ffc-ad47cbdf3383" width="720" height=""/>
<p><b>[그림13]. Edge Location </b></p>
</center>

## 4.5 AWS OutPost
회사 사람들이 매장으로 직접가지 않고 커피숍에 들러 커피를 마시고 싶어 건물내에 커피숍을 열기로 결정합니다. 커피숍 본점은 회사 내에 새로운 현장 매장과 연결되어 회사 사람들은 건물을 나가지 않고 커피를 살 수 있습니다.

커피숍 본점은 계속 열려있고 회사직원들이 출근하거나 퇴근하는 길에 본점에 들리면 본점에서 모든 개인정보에 엑세스가 가능합니다. 개인 정보는 현장 매장의 기록과 동기화 합니다.

이것이 AWS OutPost의 기능의 예시입니다.

즉 AWS OutPost는 인프라 및 서비스를 귀사의 온프레미스 데이터 센터(본점)을 포함한 다른 위치(회사 내 매장)으로 확장합니다.

- AWS Outposts는 본점과 가장 가까운 AWS Region과 지속적인 연결을 유지하여 실시간 동기화를 지원합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/aa71d9d5-5895-40bd-a7aa-4ff3349400bf" width="720" height=""/>
<p><b>[그림14]. AWS OutPost 예시</b></p>
</center>

## 4.6 API 요청을 통해 작업 수행

1. 커피숍
  - 커피 한잔을 주문합니다.
  - 리필을 요청합니다.
  - 리워드 잔액을 확인합니다.
2. AWS 클라우드
  - Amazon EC2 Instance 시작합니다.
  - Load Balancer를 생성합니다.
  - AWS Lambda 함수를 호출합니다.

이러한 AWS 작업은 API Request의 예시입니다. 이 작업은 AWS 서비스와 상호 작용할 수 있도록 미리 결정된 방법으로 API를 사용해 AWS Resource를 프로비저닝, 관리, 구성할 수 있습니다.

관리 콘솔, AWS CLI 또는 SDK를 통해 AWS Service에 엑세스하고 상호 작용할 수 있습니다.

|AWS 관리 콘솔|AWS CLI|SDK|
|:--------|:-------|:----------|
|AWS 서비스 엑세스 및 관리용 웹 기반 인터페이스, 작업 완료 프로세스 간소화 가능한 마법사와 자동화된 워크플로 포함|명령줄에서 직접 여러 AWS 서비스 제어, API 요청 시간 절약|프로그래밍 언어 또는 플랫폼으로 설계된 API를 통해 AWS 서비스를 간편하게 사용|
|모바일 App을 사용해 리소스 모니터링, 경보 보기, 결제 정보 엑세스 등 작업 수행 가능|스크립트를 통해 서비스와 App 수행 작업 자동화 가능|기존 App에서 AWS 서비스를 사용하거나 AWS에서 실행할 완전히 새로운 App 생성에 도움이 됨|
|여러 ID가 동시에 AWS 관리 콘솔 모바일 앱에 로그인 상태 유지 가능|Window, Mac, Linux 사용자가 사용 가능||

# 5. 네트워크

## 5.1 Amazon Virtual Private Cloud

### 5.1.1 커피숍의 트래픽
고객이 계산원에게 주문합니다. 그리고 계산원이 바리스타에게 주문을 전달합니다. 이 프로세스는 고객이 많이 들어오더라도 원활하게 돌아갑니다. 하지만 일부 고객이 계산원을 건너뛰고 바리스타에게 직접 주문하려하면 주문 흐름이 중단되고 고객이 커피숍의 제한 구역에 접근하게 됩니다.

이 문제를 해결하기 위해 계산원과 바리스타를 별도의 워크스테이션에 배치하여 영역을 나눕니다. 계산원은 Public이고 바리스타의 워크스테이션은 Private입니다.

이 예시는 AWS 네트워킹 서비스를 사용해 리소스를 격리하고 네트워크 트래픽 흐름을 결정하는 것과 유사합니다. 이를 구현하는 것이 Amazon VPC입니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/3863f226-cf2e-4c55-b232-4b106d3cae36" width="720" height=""/>
<p><b>[그림15]. 커피숍 트래픽 예시 1</b></p>
</center>

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/2fb454ae-a182-4062-af4c-bdfa429c5235" width="720" height=""/>
<p><b>[그림16]. 커피숍 트래픽 예시 2</b></p>
</center>

### 5.1.2 Amazon VPC

Amazon VPC로 AWS 클라우드의 격리 섹션을 프로저비닝할 수 있습니다. 해당 섹션에서는 사용자가 정의한 가상 네트워크에 리소스 시작이 가능합니다.

한 VPC내에서 여러 Subnet으로 리소스 구성이 가능합니다.

Subnet은 EC2 Instance와 같은 리소스 포함 가능한 VPC 섹션입니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/85a2c2bf-64f0-4ecd-973a-75be3ce1d25e" width="720" height=""/>
<p><b>[그림17]. VPC</b></p>
</center>

### 5.1.3 Subnet

- Public SUbnet : 온라인 상점의 웹사이트 처럼 누구나 엑세스할 수 있어야하는 리소스가 포함됩니다.
- Private Subnet : 고객의 개인정보및 주문 내역이 포함된 DB와 같이 private network를 통해서만 엑세스 할 수 있는 리소스가 포함됩니다.

subnet은 VPC내에서 서로 통신 가능합니다. 아래 그림처럼 VPC 내에 있는 두 Subnet은 서로 통신하는 App이 존재할 수 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/c7014bac-5cb6-4791-abcd-c227cab807d9" width="720" height=""/>
<p><b>[그림18]. Subnet</b></p>
</center>

### 5.1.4 Internet GateWay

Gateway를 통해 Public subnet에 엑세스할 수 있습니다. Gateway가 없으면 접근이 불가합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/b6fc8739-214b-4819-bfee-698dbcb8c70e" width="720" height=""/>
<p><b>[그림19]. Internet Gateway</b></p>
</center>

### 5.1.5 Virtual Private GateWay

Private Subnet에 접근하려면 VPG를 사용해야합니다. 추가 보호 계층이 존재하여 다른 모든 요청으로부터 인터넷 트래픽을 암호화 또는 보호하는 VPN 연결과 동일합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/f19b1610-2e82-4f24-b561-d854886dfed2" width="720" height=""/>
<p><b>[그림20]. Virtual Private GateWay</b></p>
</center>

### 5.1.6 AWS Direct Connect

또 다른 방식으로 Private Subnet에 접근할 수 있는 방식입니다. 라우터를 통해 전용 연결을 제공합니다.

해당 연결 방식을 통해 네트워크 비용을 절감하고 네트워크를 통과할 수 있는 Bandwidth를 늘리는데 도움이 됩니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/36fda414-5b1a-4dc2-80f1-3842eb8ebb42" width="720" height=""/>
<p><b>[그림21]. AWS Direct Connect</b></p>
</center>

## 5.2 네트워크 엑세스 제어 목록 및 보안 그룹

### 5.2.1 VPC의 네트워크 트래픽

Client AWS Cloud내에 App에 Data Request시 요청은 Packet 단위로 전송. 패킷은 GateWay를 통해 VPC로 진입합니다. 단 들어가거나 VPC에서 나오기전에 먼저 ACL(network Access Control List)에서 패킷 권한을 확인한 다음 송수신을 제어합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/ad06a211-7fe2-4a41-a882-5891794cfd81" width="720" height=""/>
<p><b>[그림21]. VPC Network Traffic</b></p>
</center>

### 5.2.2 네트워크 엑세스 제어 목록

ACL은 Subnet 수준에서 inbound, outbound Traffic을 제어하는 가상 방화벽입니다. 각 AWS 계정에는 기본 네트워크 ACL이 기본적으로 모든 인바운드 및 아웃바운드 트래픽을 허용하지만 사용자가 규칙을 수정, 추가할 수 있습니다.

사용자 지정 Network ACL은 사용자가 허용할 트래픽을 지정하는 규칙을 추가할 떄까지 모든 인바운드 및 아웃바운드 트래픽을 거부합니다.

또한 모든 Network ACL에는 명시적 거부 규칙이 있습니다. 헤당 규칙은 패킷과 일치하지 않는 목록의 다른 규칙이 있는 경우 해당 패킷이 거부됩니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/cad55c56-31e0-47d4-b08f-16e07c368a68" width="720" height=""/>
<p><b>[그림22]. Network ACL</b></p>
</center>

### 5.2.3 상태 비저장 패킷 필터링

아래 그림에서의 예시는 Amazon EC2 Instance에서 Internet으로 요청을 보내는 것과 비슷합니다. EC2에서 요청한 패킷 응답이 Subnet으로 돌아오면 네트워크 ACL은 이전 요청을 기억하지 못하고 규칙 목록에 따라 패킷 응답을 확인하여 제어합니다.

EC2 Instance에 대한 패킷 권한을 확인하는 VPC 구성 요소는 보안 그룹입니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/f354ed62-ad16-4c59-98b6-cf051ff37fce" width="720" height=""/>
<p><b>[그림23]. 상태 비저장 패킷 필터링 예시</b></p>
</center>

### 5.2.4 보안 그룹

보안 그룹이란 EC2 Instance에 대한 인바운드 및 아웃바운드 트래픽을 제어하는 가상 방화벽입니다.

기본적으로 보안 그룹은 모든 인바운드 트래픽을 거부하고 모든 아웃바운드 트래픽을 허용합니다. 사용자 지정 규칙을 추가하여 수정할 수 있습니다.

동일한 VPC 내에 여러 EC2가 있는 경우 동일한 보안 그룹에 연결하거나 서로 다른 보안 그룹도 사용 가능합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/502421cf-5aed-4389-b91c-9bde2657bb48" width="720" height=""/>
<p><b>[그림24]. 보안그룹</b></p>
</center>

### 5.2.5 상태 저장 패킷 필터링

보안 그룹은 ACL과 다르게 이전 요청을 기억하고 인바운드 보안 그룹 규칙에 관계없이 응답의 진행을 허용합니다.

| Security Group                          | AWS Network ACL                              |
|:-----------------------------------------|:----------------------------------------------|
| 인스턴스 기준 적용(1차 보안 계층)        | 서브넷 기준 적용(2차 보안 계층)              |
| 룰에 대한 허용 규칙만 지원               | 룰에 대한 허용 및 거부 규칙 지원             |
| 아웃바운드 요청에 대한 응답 자동 허용    | 아웃바운드 요청에 대한 응답 규칙 정의 필요   |
| 등록된 모든 규칙을 평가하여 트래픽 허용  | 등록된 규칙의 번호순으로 트래픽 허용 및 거부 |
| 특정 그룹을 지정시에만 Instance에 적용됨 | 설정된 서브넷 하단의 모든 Instance에 자동 적용됨 |
 
<center>
<img src="https://github.com/cisco/openh264/assets/56510688/a3fe40e3-d7b4-49fc-a68a-e4f11beb187d" width="720" height=""/>
<p><b>[그림25]. 상태 저장 패킷 필터링 예시</b></p>
</center>

## 5.3 AWS 글로벌 네트워크 상호 작용

### 5.3.1 도메인 이름 시스템(DNS)
1. 브라우저에 도메인 이름을 입력하면 이 요청이 고객 DNS 해석기로 전송됩니다. 

2. 고객 DNS 해석기는 회사 DNS 서버에 웹사이트에 해당하는 IP주소를 요청합니다.

3. 회사 DNS 서버는 웹사이트의 IP주소를 제공하여 응답합니다.

AWS는 Amazon Rotue 53을 이용해 DNS 기능을 제공합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/58c96de0-9443-45da-8462-fef957c8b12a" width="720" height=""/>
<p><b>[그림26]. DNS 다이어그램</b></p>
</center>

### 5.3.2 Amazon Route 53

Route 53은 사용자 요청을 AWS에서 실행되는 인프라(EC2 Instance 및 Load Balancer)에 연결합니다. 또한 외부 인프라로 라우팅할 수 도 있습니다.

또다른 기능에는 Domain name의 DNS Record를 관리하는 기능도 있습니다. Route 53에서 직접 새 도메인 이름을 등록할 수 있습니다. 다른 도메인 등록 대행자가 관리하는 기존 Domain name의 DNS Record를 전송하여 AWS 한곳에서 모든 Domain  name 관리가 가능합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/ee51b9e8-cfc7-46e6-b1b9-6f20df3a9d86" width="720" height=""/>
<p><b>[그림26]. Route 53 기능</b></p>
</center>

### 5.3.3 Amazon Route 53 및 Amazon CloudFront

1. 클라이언트는 웹사이트로 이동하여 App에 데이터를 요청합니다.

2. Route 53은 DNS 변환(resolution)을 사용하여 웹사이트에 해당하는 IP 주소를 식별하여 클라이언트에 다시 전송합니다.

3. 고객의 요청은 Amazon CloudFront를 통해 가장 가까운 Edge Location으로 라우팅됩니다.

4. Amazon CloudFront는 App load Balancer에 연결되며 App load Balancer는 수신 패킷을 EC2 Instance로 보냅니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/ee86666f-b8b1-49d9-8eed-6d5e546cdc0f" width="720" height=""/>
<p><b>[그림27]. Edge Location으로 빠르게 데이터 수신하는 방법</b></p>
</center>

# 6. 스토리지 및 데이터 베이스

## 6.1 AWS 스토리지

### 6.1.1 AWS 스토리지 유형

세가지 유형의 스토리지를 살펴봅니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/02d57389-00e4-4bdc-91c8-0fafffcd623a" width="720" height=""/>
<p><b>[그림28]. 스토리지 유형</b></p>
</center>

### 6.1.2 블록 스토리지
블럭 수준 스토리지 볼륨은 물리 하드처럼 동작합니다. 

파일은 동일한 크기의 데이터 조각(블럭)으로 구분.

DB, Enterprize Software App, Computer Hard Drive등 여러 위치에서 사용가능.

블록 스토리지를 EC2 Instance에서 실행되는 App에서도 인스턴스 스토어를 이용해 사용할 수 있습니다.
<center>
<img src="https://github.com/cisco/openh264/assets/56510688/ceadd7e4-473e-4354-a4a0-5aa755fa443e" width="720" height=""/>
<p><b>[그림29]. 블록 스토리지</b></p>
</center>

### 6.1.3 인스턴스 스토어

인스턴스 스토어는 휘발성 특성을 지니고 있어 문서를 저장하지 않고 컴퓨터를 끄면(중지 또는 종료) 컴퓨터를 다시 켰을 떄 문서가 더 이상 존재하지 않습니다.

EC2는 가상서버이기 때문에 Instance를 중지된 상태에서 시작하면 이전에 사용한 Instance Store Volume이 없는 다른 Host에서 시작될 수 있습니다.

보존이 필요할 경우 Amazon EBS를 사용하여 저장해야합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/104da1cc-b077-4811-b77a-70af7a36393d" width="720" height=""/>
<p><b>[그림30]. 인스턴스 스토어</b></p>
</center>

### 6.1.4 Amazon EBS 볼륨

EBS는 인스턴스 스토어와 다르게 중지 또는 종료하더라도 연결된 EBS 볼륨의 모든 데이터를 사용할 수 있습니다.

단 당연히 EBS 볼륨 생성을 위해 크기 및 유형을 정의한 후 프로비저닝합니다. 그 이후 EC2 Instance에 마운트합니다.

Amazon EBS Snapshot을 생성하여 EBS VOlume을 증분 백업할 수 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/cc291e41-43eb-4e85-be1e-42e891700bb1" width="720" height=""/>
<p><b>[그림31]. EBS Volume</b></p>
</center>

### 6.1.5 Amazon EBS 스냅샷

EBS의 백업 방식은 증분 백업입니다.

즉, 처음 볼륨 백업시 모든 데이터가 복사됩니다. 이후 백업에는 가장 최근의 스냅샷 이후 변경된 데이터 블록만 저장됩니다.(git branch 느낌)

나중에 배울 CloudWatch 서비스와 함께 EBS 사용하면 정기적으로 EBS Snapshot을 자동 생성할 수 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/ece4d019-1e1c-44b5-90ae-b6aeb190f0fd" width="720" height=""/>
<p><b>[그림32]. EBS SnapShot 백업 방법 </b></p>
</center>

### 6.1.6 객체 스토리지

객체 스토리지는 객체가 데이터, 메타데이터, 키로 구성됩니다.

- 데이터 : 이미지, 동영상, 텍스트 문서 또는 다른 유형의 비정형 데이터

- 메타데이터 : 데이터의 내용, 용도, 객체 크긱에 대한 컨텍스트 정보가 포함

- 키 : 고유한 식별자(보통 파일 이름, 경로)

객체 스토리지에서는 블록 스토리지와 다르게 파일을 수정하면 전체 객체가 업데이트 됩니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/289743e6-a7cd-4f4c-a84b-41d286e2163e" width="720" height=""/>
<p><b>[그림33].객체 스토리지 </b></p>
</center>

### 6.1.7 Amazon Simple Storage Service

S3는 객체 수준 스토리지를 제공하는 서비스 입니다. 데이터를 버킷 내에 객체 단위로 저장합니다.

모든 유형의 파일을 S3에 업로드 할 수 있으며, 저장공간을 무제한으로 제공합니다. 객체의 최대 파일 크기는 5TB를 넘을 수 없습니다.

S3에 파일 업로드시 권한을 설정해 파일에 대한 표시 여부 및 엑세스 제어 가능. 
Version 관리 기능으로 시간 경과에 따른 객체 변경사항 추적도 가능

Amazon S3에서는 사용한 만큼만 비용을 지불. S3를 선택할 떄 

- 데이터 검색 빈도
- 데이터 가용성

을 고려하여 선택해야함.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/3c166caf-f430-4da2-9088-6ad7faaa3a24" width="720" height=""/>
<p><b>[그림34]. Amazon S3</b></p>
</center>

### 6.1.8 Amazon S3 Storage Class

|S3 Standard|S3 Standard-IA|S3 One Zone-IA|
|:------------|:-------------|:---------------|
|자주 엑세스하는 데이터를 위한 설계|자주 엑세스하지 않고 필요에 따라 고가용성이 요구되는 데이터에 이상적|단일 가용 영역에서 데이터 저장|
|최소 3개의 가용 영역에 데이터 저장|S3 Standard와 유사하지만 Storage 가격은 더 낮고 검색 가격은 높음|S3 Standard-IA보다 Storage가격 저렴|
|객체에 대한 고가용성 제공 즉, 웹 사이트, 콘텐츠 배포, 데이터 분석 등 사용 사례에 적합|S3 Standard와 같이 최소 3개의 가용 영역에 데이터 저장|자주 엑세스하지 않고 고가용성이 필요하지 않는 엑세스 빈도가 낮은 데이터에 이상적|


|S3 Intelligent-Tiering|S3 Glacier Instant Retrieval|S3 Glacier Flexible Retrieval|S3 glacier Deep Archive|
|:------------|:----------|:---------|:--------------|
|엑세스 패턴이 불확실하거나 바뀌는 데이터에 이상적|데이터 아카이빙을 위해 설계된 저비용 스토리지|가장 저렴한 객체 스토리지 클래스|가장 저렴한 객체 스토리지 클래스|
|객체당 약간의 월별 모니터링 및 자동화 요금 부과|몇 밀리초만에 객체를 검색|검색 시간은 몇분에서 몇시간까지 구성 가능|12시간 이내에 객체를 검색|

* intelligent-Tiering에 경우 S3 Standard와 S3 Standard-IA를 둘 다 사용하며 IA에서 한번이라도 엑세스 됐다면 Standard로 옮기고 Standard에 있는 데이터가 30일 연속 엑세스 되지 않으면 Standard-IA로 자동으로 옮겨줍니다.

* Glacier의 경우 보관된 객체를 얼마나 빨리 검색해야하는지를 고려해서 3개중 하나를 선택합니다.

### 6.1.9 File Storage

다수의 서비스 및 리소스가 동시에 동일한 데이터에 엑세스해야 하는 사용 사례에 이상적입니다.(즉, 동기화 문제에 대해 강함)

여러 클라이언트가 공유 파일 폴더에 저장된 데이터에 엑세스 가능.

해당 접근방식에서는 스토리지 서버가 블록 스토리지를 로컬 파일 시스템과 함께 사용하여 파일을 구성.

클라이언트는 파일 경로를 통해 데이터 엑세스

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/a3e5f540-2d1a-4c47-a08b-cbbd8a735b41" width="720" height=""/>
<p><b>[그림35]. File Storage </b></p>
</center>

### 6.1.10 Amazon Elastic File System

EFS는 AWS Cloud Services 및 온프레미스 리소스에 확장 가능한 파일 시스템입니다. 파일을 추가 또는 제거하면 EFS가 자동으로 확장되거나 축소됩니다. App을 중단하지 않고 On-Demand로 peta-Byte 규모까지 확장 가능합니다.

EBS와 EFS의 가장 큰 차이점은 두 서비스가 가용 영역 내부 및 여러 가용 영역간에 작동 방식입니다.

EBS 볼륨은 단일 가용 영역에 데이터를 저장하므로 EC2 Instance를 EBS 볼륨에 연결할려면 EC2 Instance와 EBS 볼륨 모두 동일한 가용 영역에 상주해야 합니다.

EFS는 기본적으로 여러 가용 영역 내 및 여러 가용 영역 간에 데이터를 저장하므로 파일 시스템이 위치한 Region의 모든 가용 영역에서 동시에 데이터를 엑세스할 수 있습니다.

또한 온프레미스 서버는 AWS Direct Connect를 이용해 EFS에 바로 접근이 가능합니다.

* EFS는 단일 가용 영역내에 데이터를 중복 저장하는 옵션도 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/def94100-2564-406e-bd3f-dfbcd2d68e50" width="720" height=""/>
<p><b>[그림36]. EFS 이점 </b></p>
</center>

## 6.2 AWS 데이터베이스

### 6.2.1 DB 유형
DB는 구조화된 정보의 체계적인 모음입니다.

크게 RDB(SQLDB), NoSQLDB 로 나뉩니다
<center>
<img src="https://github.com/cisco/openh264/assets/56510688/96012aa4-98d4-420a-bd1c-61f6d0e4e1ae" width="720" height=""/>
<p><b>[그림37]. DB 유형 </b></p>
</center>


### 6.2.2 관계형 DB
RDB는 데이터가 다른 데이터 부분과 관련된 방식으로 저장됩니다.

- RDB는 SQL(Standard Query Language)를 사용해 데이터를 저장하고 쿼리합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/2601626d-1e97-4e4d-b95c-8f74375dc1b7" width="720" height=""/>
<p><b>[그림38]. RDB</b></p>
</center>

### 6.2.3 Amazon Relational DB Service

Amazon RDS는 하드웨어 프로비저닝, DB 설정, 패치 적용 및 백업과 같은 작업을 자동화하는 관리형 서비스입니다.

다양한 보안옵션 또한 제공합니다.(Ex. DB 저장시 데이터 암호화 및 전송 중 암호화)

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/88f1339f-bb3b-4e1d-ae72-72bb51d1423a" width="720" height=""/>
<p><b>[그림39]. </b></p>
</center>

### 6.2.4 Amazon RDS DB Engine

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/6ef124cd-f0d3-4969-ab9a-ffb6e7ad7cee" width="720" height=""/>
<p><b>[그림40]. Amazon RDS DB</b></p>
</center>

### 6.2.5 Amazon Aurora

- MySQL 및 PostgreSQL RDB와 호환 가능

- Amazon Aurora Serverless는 표준 MySQL DB 보다 최대 5배 빠르고 Postgre보다는 최대 3배 빠름.

- 워크로드에 고가용성이 필요한 경우 유용함.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/a7c6ed68-ff57-4222-8ae8-af009e85595e" width="720" height=""/>
<p><b>[그림41]. Amazon Aurora DB</b></p>
</center>

### 6.2.6 비관계형 DB

Non-RDB는 테이블을 생성합니다.

행과 열이 아닌 키:값의 딕셔너리 구조를 사용하고 있는 것이 특징이며 데이터 쌍을 여러개 가질 수도 있다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/7c2c7ae5-c7ae-4234-96f1-9869f8c9d5bb" width="720" height=""/>
<p><b>[그림42]. NoSQL DB</b></p>
</center>

### 6.2.7 Amazon DynamoDB

Serverless이므로 유저가 서버를 관리, 유지해야할 필요가 없으며, NoSQL 데이터 구조를 지원한다.

- 하루 10조건 이상의 요청을 처리하며 초당 2000만건 이상의 요청을 처리해야할 때 유용한 DBS이다.

- DB 크기가 축소 또는 확장되면 DynamoDB또한 자동으로 크기를 조정한다. (성능 또한 일정하다.)

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/44b3b2f3-57f8-458b-b027-778acf1dc665" width="720" height=""/>
<p><b>[그림43]. </b></p>
</center>

### 6.2.8 AWS DB Migration Service

이미 쓰고 있는 SQLDB 또는 NoSQLDB를 마이그레이션 서비스를 통해 AWS DBS로 이주 시킬 수 있습니다. 마이그레이션 동안에 원본 DB는 본인의 역할을 계속 수행하고 있습니다.

크게 세가지 사용 사례로 나눌 수 있습니다.

1. 개발 및 테스트 데이터베이스 마이그레이션

2. 데이터 베이스 통합

3. 지속적 복제

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/42a1d2ed-2800-47d0-afe5-b94fecda7a32" width="720" height=""/>
<p><b>[그림44]. AWS DB 마이그레이션</b></p>
</center>

## 6.3 추가 DB Service

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/265eb942-fb60-4212-a02d-524469f43191" width="720" height=""/>
<p><b>[그림45]. DBS 1</b></p>
</center>

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/70983e13-0f64-4bcf-a8c8-b770de92e969" width="720" height=""/>
<p><b>[그림46]. DBS 2</b></p>
</center>

# 7. 보안
## 7.1 공동 책임 모델

공동 책임 모델은 크게 두가지로 나눌 수 있습니다.

- 클라우드 내부의 보안(고객 책임) : 고객 데이터, 플랫폼, 애플리케이션, 자격 증명 및 엑세스 관리, 운영 체제, 네트워크 및 방화벽 구성, 클라이언트 측 데이터암호화, 서버 측 암호화, 네트워크 트래픽 보호

- 클라우드 자체의 보안(AWS 책임) : 소프트웨어, 컴퓨팅, 스토리지, 데이터베이스, 네트워킹, 하드웨어/AWS 글로벌 인프라, 리전, 가용 영역, 엣지 로케이션

쉽게 구별하자면 서비스를 요청하면 대부분 프로비저닝을 맨 처음에 하게 되는데 이 부분들의 보안 문제는 거의 AWS 책임이라 보면된다. 또한 글로벌 인프라도 AWS의 책임이다.

이후에 만들어준 서비스에 대해서 데이터 통신 및 권한 설정 등은 고객이 물건을 사용하면서 발생하는 문제이므로 고객 책임이다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/e2163ba4-80f3-42a7-9129-d50b84a0d6bc" width="720" height=""/>
<p><b>[그림47]. </b></p>
</center>

## 7.2 AWS Identity and Access Management(IAM) 보안

IAM을 이용해 AWS 서비스 및 리소스에 대한 엑세스를 관리할 수 있습니다.

- IAM 사용자, 그룹 및 역할
- IAM Policy
- MFA

위의 기능을 조합하여 회사의 고유한 운영 및 보안 요구 사항에 따라 엑세스 권한을 구성할 수 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/8732c3e0-c008-41e4-a2af-373f6348affe" width="720" height=""/>
<p><b>[그림48]. </b></p>
</center>

### 7.2.1 커피숍에서의 보안

각 직원의 계정에는 본인 업무와 관련된 작업만 수행할 수 있도록 권한이 할당 되어 있습니다. 이러한 유형은 AWS의 IAM을 통해 구현합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/37f9e8cb-9fd3-4d35-b2e4-072665a3144d" width="720" height=""/>
<p><b>[그림49]. </b></p>
</center>

### 7.2.2 AWS Account Root User

루트 사용자는 AWS 서비스 및 리소스에 대한 전체 엑세스 권한을 가집니다.

AWS에서는 루트 사용자를 통해 하위 IAM 사용자를 만들어 트리 구조를 형성하는걸 보안상 추천합니다. 일상에서 루트 사용자로 모든 업무를 보는 것을 보안 상 좋은 관점으로 바라보지 않습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/b8387e7b-1458-4125-84cc-da81f336d257" width="720" height=""/>
<p><b>[그림50]. </b></p>
</center>

### 7.2.3 IAM User

기본적으로 처음 만들어진 IAM User는 어떠한 권한도 연결되어 있지 않으므로 이를 부여해야합니다.

또한 보안 관점에서 동일 수준의 엑세스가 필요한 직원이 여려명이면 각 직원마다 개별 IAM USER를 생성하는 것을 권장하고 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/05721c90-2a98-49d7-b0d0-19efcf8ac54f" width="720" height=""/>
<p><b>[그림51]. </b></p>
</center>

### 7.2.4 IAM Govermency

IAM 정책을 사용하면 user가 Resource에 엑세스할 수있는 수준을 사용자가 지정할 수 있습니다.

보안상 최소 권한 보안 원칙을 따르도록 권장하고 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/41950ef4-ed44-4baf-abee-45851503c2ac" width="720" height=""/>
<p><b>[그림52]. </b></p>
</center>


<center>
<img src="https://github.com/cisco/openh264/assets/56510688/2534c1af-5e5f-4428-80b4-fae8561f2b7a" width="720" height=""/>
<p><b>[그림54]. </b></p>
</center>

### 7.2.5 IAM Group

Group 수준에서 IAM 정책을 할당하여 직원이 직무를 전환하는 경우 그룹을 다르게 배정함으로써 권한을 손쉽게 조정할 수 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/5d2dfdd6-76cf-44c7-92d7-f0b597490e53" width="720" height=""/>
<p><b>[그림53]. </b></p>
</center>

### 7.2.6 IAM Role

만약 커피숍의 한 직원이 시간 마다 여러 워크스테이션을 처리하려면 여러 권한을 다 부여받아야 할 것입니다. 하지만 이것은 보안 상 좋지 않으므로 IAM Role을 이용하여 특정 시점에 단일 워크스테이션만 엑세스 하도록 만드는 것이 좋습니다.

새 역할을 수임하는 것은 이전 역할을 포기하고 새 역할에 지정된 권한을 수임하는 것입니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/3586c66c-b9fc-48dc-82b4-3d1e00219a4d" width="720" height=""/>
<p><b>[그림54]. </b></p>
</center>

### 7.2.7 MFA

AWS 계정에 추가 보안 계층을 제공하는 것으로 OTP 서비스가 그 예가 될 수 있습니다. 하드웨어 보안 키, 또는 디바이스, MFA App등으로 지원합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/58098df7-6e1b-49d7-8598-926cf5f373c9" width="720" height=""/>
<p><b>[그림55]. </b></p>
</center>

## 7.3 AWS Organizations

AWS Organization은 Root가 여러 AWS Accounts를 통합 관리 하도록 지원합니다.

조직 생성 시 자동으로 Root를 생성하며 이는 조직의 모든 계정에 대한 상위 컨테이너입니다.

AWS Organization은 SCP(Service Control Policy)를 사용해 조직 계정을 제어합니다.

그 예로 SCP를 이용해 AWS 서비스, 리소스 및 개별 API 작업을 계정마다 엑세스 권한 부여가 가능하고 루트에도 SCP를 적용해 MFA를 활성화 하도록 강제 할 수 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/f5ac45a0-e004-46de-bed6-dec4461f02bc" width="720" height=""/>
<p><b>[그림56]. </b></p>
</center>

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/aeba09f7-fe19-4f1c-bb46-92ddcd9052b7" width="720" height=""/>
<p><b>[그림57]. </b></p>
</center>

## 7.4 AWS 사용 시 규정 준수

### 7.4.1 AWS Artifact

회사가 속한 업종에 따라 특정 표준을 준수해야 할 수 있습니다. AWS Artifact를 이용해 개별 계정 및 모든 계정에 대한 계약을 검토, 수락 및 관리 가능합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/96084631-e1af-4c0e-bd5b-186c5fb9e405" width="720" height=""/>
<p><b>[그림57]. </b></p>
</center>

### 7.4.2 AWS 보증 프로그램

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/52ad395e-a051-47c7-8f05-afb4dcab4e90" width="720" height=""/>
<p><b>[그림58]. </b></p>
</center>

### 7.4.3 고객 규정 준수 센터

- 핵심 규정 준수 관련 질문에 대한 AWS의 답변
- AWS 위험 및 규정 준수에 대한 개요
- 보안 감사 체크리스트
등 위와 관련된 규정 준서 백서 및 설명서에 엑세스가 가능합니다.

또한 고객 규정 준수 센터에는 감사자 학습 경로가 포함되어 있으므로 해당 경로를 통해 내부 운영에서 AWS 클라우드를 사용한 규정 준수를 입증할 수 있는 방법이 존재합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/6ad26a47-5324-4c63-a6a2-ddaf9210b839" width="720" height=""/>
<p><b>[그림59]. </b></p>
</center>

## 7.5 애플리케이션 보안

### 7.5.1 AWS WAF(Web Application FireWall)

- 애플리케이션 계층 보호 : 사용자 지정 또는 서드 파트 웹 애플리케이션 취약점 이용해 웹 공격을 방지하는 추가 계층을 확보 가능합니다. 또한 WAF는 실시간 지표 제공, IP 주소, 지리적 위치에 대한 세부 정보를 포함하는 원시 요청을 수집합니다.

- CloudFront 통합 : CloudFront에서는 WAF를 사용하면 최종 사용자와 가장 가까운 Edge Location에서 규칙이 실행되므로 보안 때문에 성능이 저하되지는 않습니다. 차단된 요청은 고객 웹 서버에 도달하기전 중지됩니다. Load Balancer에서 WAF 실행 시 규칙은 Region에서 실행됩니다. 이를 통해 인터넷과 연결된 Load Balancer와 내부 Load Balancer를 보호할 수 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/c9207f37-5517-41ce-8ceb-314f08d86457" width="720" height=""/>
<p><b>[그림60]. </b></p>
</center>

#### 7.5.1.1 AWS WAF 규칙

AWS WAF는 Subnet이 Network ACL을 사용해 외부에서 들어오는 트래픽과 내부에서 나가는 트래픽에 인아웃바운드 규칙을 적용하는 것처럼 Web ACL을 사용해 Web과 연결된 Resource를 보호합니다.

예를 들자면  아래 표시된 두 사용자 지정 규칙이 있습니다. 이 규칙들을 사용해 차단 or 허용 하려는 IP 주소를 수동으로 삽입 할 수 있으며. 두 개의 규칙으로 구성된 관리형 규칙 그룹도 포함될 수 있습니다.

- HTTP 플러드 : 해당 규칙은 특정 IP ADDR에서 시작하는 다량의 요청으로 구성된 공격을 차단합니다.

- SQL 명령어 삽입 : 해당 규칙은 요청의 URI, Query String or 본문에서 일반적인 SQL Injection을 차단합니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/8ee20d7d-81f7-4dc1-8d37-46a1ed73392c" width="720" height=""/>
<p><b>[그림61]. </b></p>
</center>

### 7.5.2 Dos 및 DDoS 공격

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/81f1240d-1091-406a-b30f-7f7be0bdac6a" width="720" height=""/>
<p><b>[그림62]. </b></p>
</center>

### 7.5.3 AWS Shield

AWS는 DDoS를 대처하기 위해 AWS Shield 기능을 사용합니다. 두 가지 보호 수준을 제공합니다.

- AWS Shield Standard : 기본적으로 제공하는 무료 서비스 입니다. 악성 트래픽이 감지되면 실시간으로 탐지하고 자동으로 완화합니다.

- AWS Shield Advanced : 상세한 공격 진단 및 정교한 DDoS 공격을 탐지하고 완화하는 유료 서비스입니다.

* AWS Shield와 AWS WAF를 통합할 수 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/ab01f145-c413-4859-ac68-5f2109fb3562" width="720" height=""/>
<p><b>[그림47]. </b></p>
</center>

### 7.5.4 Amazon Inspector

해당 서비스는 자동 보안 평가를 실행 해 App의 보안 및 규정 준수를 개선합니다. App과 Container에서 EC2 Instance에 대한 open Access, 취약한 Software Ver.와 같은 사례를 검사합니다.

이후 보안 탐지 결과 목록을 제공해 우선순위를 매겨줍니다. 단 모든 보안문제를 해결해 주지는 않습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/16ca6737-dd8b-43cc-b6fa-9de60655f192" width="720" height=""/>
<p><b>[그림47]. </b></p>
</center>

## 7.6 추가 보안 서비스

AWS Key Management와 Amazon GuardDuty를 살펴봅시다. 이는 데이터가 저장되어 있거나 전송될 떄 무단 엑세스로부터 데이터를 보호하는 방법입니다.


### 7.6.1 AWS Key Management Service

AWS KMS를 사용해 저장 시 암호화 그리고 전송 중 암호화를 공개 키 방식으로 암호화 작업을 수행 합니다.

해당 서비스는 키에 필요한 특정 수준의 엑세스 제어를 선택 가능합니다. 예를 들어 키를 관리할 수있는 IAM 사용자 및 역할 지정 가능. 안쓰는 키 또한 비활성화 가능, AWS KMS 밖으로 Key가 벗어나지 않음

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/00fbeff1-77c8-46d4-8ac7-c8d438008bb0" width="720" height=""/>
<p><b>[그림47]. </b></p>
</center>

### 7.6.2 Amazon GuardDuty

AWS 인프라 및 리소스에 대한 지능형 위협 탐지 기능 제공, 지속적으로 네트워크 및 계정활동을 모니터링 하여 VPC Flow Logs 및 DNS 로그를 비롯한 여러 AWS 소스의 데이터를 분석합니다.

자동으로 문제 해결단계를 수행하도록 람다 함수의 트리거가 될 수 있습니다.

<center>
<img src="https://github.com/cisco/openh264/assets/56510688/41c9238f-604a-4862-b942-872860a7da7c" width="720" height=""/>
<p><b>[그림47]. </b></p>
</center>

# 8. 모니터링 및 분석

모니터링 기능을 이용해 분석하면 사용을 최적화하고 즉각 대응이 필요한 작업을 식별하기 편합니다. 우선 CloudWatch부터 살펴봅시다.

## 8.1 Amazon CloudWatch

### 8.1.1 커피숍 지표

점주는 커피숍에 있을때 운영을 모니터링 합니다. 예를 들면 지난 시간 동안 평균 고객 대기 시간은 얼마나 걸렸고, 남은 페이스트리 수량은 얼마인가 확인합니다.

그리고 일정 임계값을 상회 또는 하회 할 경우 이를 알아차려 대응합니다.

CloudWatch 또한 리소스를 모니터링하여 해당 리소스에 대한 자동작업을 구성할 수 있습니다.

<center>

<p><b>[그림47]. </b></p>
</center>

### 8.1.2 CloudWatch

CloudWatch의 모니터링을 시각화 하는 도구는 지표입니다.

지표를 이용해 리소스에 대한 데이터요소, 시간 경과에 따라 성능 변화 그래프를 보여줍니다.

또한 지표의 값이 미리 정의된 임계값을 자극했을 때 자동으로 작업을 수행하는 "경보"를 생성할 수 있습니다.

<center>

<p><b>[그림47]. </b></p>
</center>

### 8.1.3 CloudWatch DashBoard

아래 그림 예시에서는 RDS instance, EC2 Instance, EBS Volume을 사용합니다. CloudWatch DashBoard를 사용해 EC2 Instance의 CPU Util 모니터링, S3 Bucket에 대한 총 요청 수를 추적할 수 도 있습니다.

<center>

<p><b>[그림47]. </b></p>
</center>

## 8.2 AWS CloudTrail

### 8.2.1 커피숍 이벤트

어느날 커피숍 점주가 예상치 못한 커피 원두를 배송받은 예를 살펴 봅시다. 정기 배송은 다음 주까지 예정이 없으므로 왜 지금 도착했는지 알아야합니다.

점주는 지난 며칠 동안 무슨일이 있었는지 장부, 주문 내역 등을 살펴보며 이벤트를 추적합니다. 인벤토리 시스템을 확인하다 담당자가 이틀전 커피 원두를 주문한 것을 발견합니다.

POS 시스템에서 트랜잭션 로그를 살펴봐 3일전 예상치 못한 매출 증가로 정기 배송 이전에 원두가 떨어질 것을 염려해 추가 주문을 한 것을 확인했습니다.

AWS에서는 CloudTrail을 이용해 이러한 문제를 해결할 수 있습니다.

<center>

<p><b>[그림47]. </b></p>
</center>

### 8.2.2 CloudTrail

해당 서비스는 계정에 대한 API 호출을 기록합니다. 정보에는

- API 호출자 ID
- API 호출 시간
- API 호출자의 소스 IP 주소 등

포함됩니다.

API 호출을 사용해 AWS Resource를 프로비저닝, 관리, 구성할 수 있으므로 CloudTrail을 사용해 App 및 리소스에 대한 사용자 활동 및 API 호출 내역을 살펴볼 수 있습니다.

일반적으로는 이벤트 발생 후 15분 이내에 업데이트됩니다.

CloudTrail에서 CloudTrail Insights를 활성화 할 수 도 있습니다.

해당 기능은 비정상적인 API활동을 자동으로 감지합니다.

해당 기능을 활성화 하면, 예를 들어 최근에 계정에서 평소보다 많은 수의 EC2 인스턴스가 시작됨을 감지할 수 있어 이를 보고 전체 이벤트 세부 정보를 검토하여 적절한 조치를 결정할 수 있습니다.

<center>

<p><b>[그림47]. </b></p>
</center>

### 8.2.3 CloudTrail Event

예를 들어 점주가 Mary라는 이름의 IAM 사용자가 생성된 것을 발견하고 이를 추적할 떄 사용할 수 있습니다. 해당 로그는 3W, 1H를 이용해 세부 정보를 제공합니다.

<center>

<p><b>[그림47]. </b></p>
</center>

## 8.3 AWS Trusted Advisor

### 8.3.1 커피숍 개선

커피숍은 개점한지 꽤 되어서 운영을 개선하려고 합니다. 그래서 커피숍 컨설턴트에게 도움을 청합니다.

컨설턴트는 주문 처리 프로세스, 소모품 사용, 디지털 기록 보안 방법 등 커피숍 비지니스 관행을 관찰합니다.

관찰을 완료하면 점주에게 연구 결과 및 권장 개선 영역을 요약해 제공합니다. 

해당 예시는 AWS Trusted Advisor을 통해 도움을 받을 수 있습니다.

<center>

<p><b>[그림47]. </b></p>
</center>

### 8.3.2 Trusted Advisor

해당 서비스는

1. 비용최적화
2. 보안
3. 내결함성
4. 성능
5. 서비스 한도

총 5가지 범주에서 검사결과를 AWS 모범 사례와 비교하여 권장 작업 목록을 제공하고 모범 사례를 알아 볼 수 있는 추가 자료를 제공합니다.

해당 서비스를 통해 새로운 워크 플로를 만들거나 새 App을 개발하는데 도움을 받을 수 있고, 기존 App 및 리소스를 지속적으로 개선하는데 활용 가능합니다.

<center>

<p><b>[그림47]. </b></p>
</center>

### 8.3.3 Trusted Advisor DashBoard

다음은 S3에서 검사에 대해 알림을 나타내는 예시입니다.

- 버킷의 엑세스 제어 목록에서 인증된 AWS 사용자가 버킷 내의 객체를 볼 수 있도록 허용하는 경우 노란색 조사 알림이 발생할 수 있습니다.
- 버킷의 제어 목록에서 인증된 AWS 사용자가 버킷에 파일을 업로드, 삭제 허용하는 경우 빨간색 조치 알림이 발생 가능합니다.

<center>

<p><b>[그림47]. </b></p>
</center>

# 9. 요금 및 지원

AWS를 이용하면서 비용을 최적화 하는 방법을 알려줍니다.

<center>

<p><b>[그림47]. </b></p>
</center>

## 9.1 AWS 요금

### 9.1.1 AWS 프리 티어 범주


1. AWS 프리티어
  - 상시 무료 : 만료기간 X, 모든 고객 사용 가능 Lambda는 매월 무료요청 1백만 건과 최대 320만초의 컴퓨팅 시간 제공
  - Amazon DynamoDB는 매월 25GB 무료 스토리지 사용 가능
2. 12개월 무료
  - 일정량의 S3 Standard 스토리지
  - 월별 Amazon EC2 컴퓨팅 시간 한도
  - Amazon CloudFront 데이터 전송량
3. 평가판
  - 단기 무료 평가판 제품(ex. Amazon Inspector는 90일 무료 평가판)
  - Amazon Lightsail(Virutal Private Server 제공) 30일 동안 750시간 무료 사용 기간 제공
  
<center>

<p><b>[그림47]. </b></p>
</center>

### 9.1.2 요금 개념

- 종량제 : 실제 사용 리소스양에 대해 지불
- 예약제 : 종량제에 비해 최대 72%까지 절약가능
- 볼륨 기반 할인 적용 : 사용량이 증가함에 따라 단위당 비용이 점차 낮아집니다.(ex. Amazon S3 Storage 공간에 비례해 GB당 비용을 적게 지불)

<center>

<p><b>[그림47]. </b></p>
</center>

### 9.1.3 AWS 요금 계산기

AWS 비용 추정을 정의된 그룹별로 구성, 그룹은 비용 센터별로 추정치 제공, 다른사람과 추정치 공유 가능

<center>

<p><b>[그림47]. </b></p>
</center>

### 9.1.4 AWS Lambda 요금 + 예시



<center>

<p><b>[그림47]. </b></p>
</center>

<center>

<p><b>[그림47]. </b></p>
</center>

### 9.1.5. EC2 요금 + 예시



<center>

<p><b>[그림47]. </b></p>
</center>

<center>

<p><b>[그림47]. </b></p>
</center>

### 9.1.6. S3 요금 + 예시

- 스토리지 : 사용한 스토리지 클래스, 객체의 크기, 저장 기간
- 요청 및 데이터 검색 : 객체가 얼마나 호출 받았는지
- 데이터 전송 : 동일 리전 상 S3와 S3간 전송, S3와 CloudFront간의 전송 데이터는 비용 X, 단 S3에서 송수신한 데이터는 비용 청구
- 관리 및 복제 : 버전 관리 기능에 대해 비용 지불, S3 Inventory 분석, 객체 태그 지정이 포함


<center>

<p><b>[그림47]. </b></p>
</center>

<center>

<p><b>[그림47]. </b></p>
</center>

## 9.2 통합 결제 + 예시

AWS Organization 통합 결제를 이용해 모든 AWS 계정에 대한 단일 청구서를 수령할 수 있습니다. 또한 여러 계정을 결합할 경우 사용량이 집계 되어 혜택이 조직의 모든 계정에 적용 가능할 수 있습니다.

* 하나의 Oragnization에서는 최대 4개의 계정이 가능하지만 AWS Support를 통해 할당량을 늘릴 수 있습니다.

<center>

<p><b>[그림47]. </b></p>
</center>

<center>

<p><b>[그림47]. </b></p>
</center>

### S3의 대량 구매 할인 예시

<center>

<p><b>[그림47]. </b></p>
</center>

<center>

<p><b>[그림47]. </b></p>
</center>

## 9.3 AWS 요금 관련 도구

<center>

<p><b>[그림47]. </b></p>
</center>

### 9.3.1 AWS Budgets

해당 기능에서 서비스 사용량, 서비스 비용 및 인스턴스 예약 가능

- 하루에 세번 업데이트 되며 프리티어 한도 또는 예산 금액에 얼마나 근접한지 파악 가능
- 예산 금액 초과되거나 예상될 경우 지정 알림 가능

<center>

<p><b>[그림47]. </b></p>
</center>

### 9.3.2 AWS Cost Explorer

해당 기능은 시간 경과에 따른 AWS 비용 및 사용량 시각화 이해하고 관리하는데 사용 가능

- 사용자 필터 및 그룹을 적용해 데이터 분석 가능, 시간별 리소스 사용량 확인

<center>

<p><b>[그림47]. </b></p>
</center>

## 9.4 AWS Support 플랜



### 9.4.1 Basic Support

해당 기능은 모든 AWS 고객에게 무료로 제공 되며 기술 문서, 설명서 및 지원 커뮤니티 엑세스 가능합니다.

- AWS Persnonal Health Dashboard도 사용 가능합니다.

<center>

<p><b>[그림47]. </b></p>
</center>

### 9.4.2 AWS Support Plan

1. Developer Support Plan
  - 모범 사례 상담
  - 클라이언트 측 진단 도구
  - 모든 AWS 제품, 기능, 서비스 사용 방법
2. Business Support Plan
  - 특정 요구 사항 지원 가능 AWS 제품, 기능 및 서비스 식별을 위한 사용 사례 지침
  - 모든 AWS Trusted Advisor 검사
  - 일반 OS 및 APP stack 구성요소와 같은 서드 파티 SW 제한적 지원
3. Enterprise On-Ramp Support 또는 Enterprise
  - 회사의 특정 사용 사례 및 App을 지원하기 위한  컨설팅 관계 App Arch 지침
  - 인프라 이벤트 관리
  - 지침을 제공하기 위한 Technical Account Manager(TAM) 풀
  
<center>

<p><b>[그림47]. </b></p>
</center>

### 9.4.3 Techincal Account Manager(TAM)

Enterprise 단계의 Plan에서만 가능하며 AWS 전담 매니저와 상담 가능한 창구입니다.

<center>

<p><b>[그림47]. </b></p>
</center>

## 9.5 AWS MarketPlace

AWS에서 실행되는 SW를 검색하고 평가하고 구매 가능합니다.

Marketplace의 각 리스팅에 대해 요금 옵션, 사용 가능한 지원 및 고객 리뷰를 살펴볼 수 있습니다.

업종별 및 사용 사례별로 솔루션 탐색도 가능합니다.

<center>

<p><b>[그림47]. </b></p>
</center>

### 9.5.1 AWS Marketplace 범주

<center>

<p><b>[그림47]. </b></p>
</center>

# 10. 마이그레이션 및 혁신

## 10.1 AWS Cloud Adoption Framework

## 10.2 Migration Stragety

## 10.3 AWS Snow Family

## 10.4 AWS를 통한 혁신

## 10.5 AWS Well-Architected Framework